@using RepairEquipment.Client.Services
@using System.ComponentModel.DataAnnotations

<MudDialog>
	<DialogContent>
		<MudForm @bind-IsValid="@success">
            <MudItem xs="12" sm="6" md="12">
                <MudGrid Spacing="0">

                    @* Name *@
                    <MudTextField T="string" Label="Name" Required="true" RequiredError="Name is required!" @bind-Value="Employee.Name" />

                    @* Surname *@
                    <MudTextField T="string" Label="Surname" Required="true" RequiredError="Surname is required!" @bind-Value="Employee.Surname" />

                    @* Code *@
                    <MudTextField T="string" Label="Code" Required="true" RequiredError="Code is required!" @bind-Value="Employee.Code" />

                    @* PersonalCode *@
                    <MudTextField T="string" Label="PersonalCode" Validation="@(new RegularExpressionAttribute("^[0-9]{6}-[0-9]{5}$") { ErrorMessage = "Personal code is incorrect" })"
                                  Required="true" RequiredError="Personal code is required!" @bind-Value="Employee.PersonalCode" />
                    @* Phone *@
                    <MudTextField T="string" Label="Phone" Required="true" RequiredError="Phone is required!" @bind-Value="Employee.Phone" />

                    @* Email *@
                    <MudTextField T="string" Label="Email" Validation="@(new EmailAddressAttribute() { ErrorMessage = "The email address is invalid"} )"
                                  @bind-Value="Employee.Email" Required="true" RequiredError="Email is required!" />

                    @* Address *@
                    <MudTextField T="string" Label="Address" Required="true" RequiredError="Address is required!" @bind-Value="Employee.Address" />

                </MudGrid>
            </MudItem>
        </MudForm>
	</DialogContent>

    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
        <MudButton Color="Color.Primary" Disabled="@(!success)" OnClick="Submit">Ok</MudButton>
    </DialogActions>

</MudDialog>

        
@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    [Parameter] public EmployeeRecord Employee { get; set; } = new EmployeeRecord();
    bool success;

    void Submit() => MudDialog.Close(DialogResult.Ok(Employee));
    void Cancel() => MudDialog.Cancel();
}