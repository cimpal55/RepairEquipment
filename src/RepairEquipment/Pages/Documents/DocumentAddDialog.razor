@using RepairEquipment.Client.Services
@using RepairEquipment.Client.Services.Interfaces
@inject IEmployeeService _employee


    <MudCard>
        <MudCardContent>
           <MudForm @bind-IsValid="@success">

                @* Name *@
               <MudTextField T="string" Label="DocumentNumber" Required="true" RequiredError="Document number is required!" @bind-Value="Document.DocumentNumber"/>
               
               @* Client *@
               <MudSelect Label="Client" Required="true" RequiredError="Client is required!" @bind-Value="_selectedClient">
                   @foreach (ClientRecord client in Clients)
                   {
                        <MudSelectItem Value="@client">@client.Name</MudSelectItem>
                   }
               </MudSelect>

               @* Employee *@
               <MudSelect Label="Employee" Required="true" RequiredError="Employee is required!" @bind-Value="Document.EmployeeId">
                   @foreach (EmployeeRecord employee in Employees)
                   {
                        <MudSelectItem Value="@employee">@employee.Name</MudSelectItem>
                   }
               </MudSelect>
               
            </MudForm>
        </MudCardContent>
        <MudCardActions>
            <MudButton OnClick="Cancel">Cancel</MudButton>
            <MudButton Color="Color.Primary" Disabled="@(!success)" OnClick="Submit">Ok</MudButton>
        </MudCardActions>
    </MudCard>


@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    [Parameter]
    public DocumentRecord Document { get; set; } =
    new DocumentRecord();
    [Parameter] public List<EmployeeRecord>? Employees { get; set; }
    [Parameter] public List<ClientRecord>? Clients { get; set; }
    [Parameter] public static ClientRecord? _selectedClient { get; set; }
    [Parameter] public static EmployeeRecord? _selectedEmployee { get; set; }
    bool success;

    void Submit() => MudDialog.Close(DialogResult.Ok(Document));
    void Cancel() => MudDialog.Cancel();

}